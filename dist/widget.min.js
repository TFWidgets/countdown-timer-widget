(function(w,d){var c={locale:"en-GB",target:null,autoStart:!0,doneText:"Event started!",labels:{days:"Days",hours:"Hours",minutes:"Minutes",seconds:"Seconds"},showControls:!0,titleSet:"Event is set",titleUnset:"Set event date"};function p(n){return String(n).padStart(2,"0")}function v(val){if(!val)return"";var t=new Date(val);return t.getFullYear()+"-"+p(t.getMonth()+1)+"-"+p(t.getDate())+"T"+p(t.getHours())+":"+p(t.getMinutes())}function CW(el,o){this.element=el,this.config=Object.assign({},c,o||{}),this.timer=null,this.init()}CW.prototype.init=function(){this.render(),this.bindEvents(),this.config.autoStart&&this.config.target&&this.start()};CW.prototype.render=function(){var t=this.config,e=t.showControls!==!1?'<div class="countdown-header"><h1 class="countdown-main-title">ðŸ•’ Countdown Timer</h1><div class="countdown-controls"><input type="datetime-local" class="countdown-input"><button class="countdown-button" data-action="set">Set Event</button></div></div>':"";this.element.innerHTML=e+'<div class="countdown-widget"><div class="countdown-digit"><div class="countdown-number" data-unit="days">00</div><div class="countdown-label">'+t.labels.days+'</div></div><div class="countdown-digit"><div class="countdown-number" data-unit="hours">00</div><div class="countdown-label">'+t.labels.hours+'</div></div><div class="countdown-digit"><div class="countdown-number" data-unit="minutes">00</div><div class="countdown-label">'+t.labels.minutes+'</div></div><div class="countdown-digit"><div class="countdown-number" data-unit="seconds">00</div><div class="countdown-label">'+t.labels.seconds+'</div></div></div><div class="countdown-status">'+(t.target?t.titleSet:t.titleUnset)+"</div>";var i=this.element.querySelector(".countdown-input");i&&t.target&&(i.value=v(t.target))};CW.prototype.bindEvents=function(){var b=this.element.querySelector('[data-action="set"]'),i=this.element.querySelector(".countdown-input"),s=this;b&&i&&b.addEventListener("click",function(){var x=i.value;x?(s.setTarget(x),s.start()):alert("Please choose a date and time")})};CW.prototype.setTarget=function(t){this.config.target=t;var T=this.element.querySelector(".countdown-status");if(T){var l=this.config.locale||"en-GB",d=new Date(t);T.textContent="Event: "+d.toLocaleString(l,{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1})}};CW.prototype.start=function(){this.timer&&clearInterval(this.timer);var tt=new Date(this.config.target).getTime(),s=this;this.timer=setInterval(function(){var n=Date.now(),d=tt-n;if(d<=0){s.complete();return}var a=Math.floor(d/86400000),h=Math.floor(d%86400000/3600000),m=Math.floor(d%3600000/60000),e=Math.floor(d%60000/1000);s.updateDisplay({days:a,hours:h,minutes:m,seconds:e})},1e3)};CW.prototype.updateDisplay=function(t){this.element.querySelector('[data-unit="days"]').textContent=String(t.days).padStart(2,"0"),this.element.querySelector('[data-unit="hours"]').textContent=String(t.hours).padStart(2,"0"),this.element.querySelector('[data-unit="minutes"]').textContent=String(t.minutes).padStart(2,"0"),this.element.querySelector('[data-unit="seconds"]').textContent=String(t.seconds).padStart(2,"0")};CW.prototype.complete=function(){this.timer&&clearInterval(this.timer);var T=this.element.querySelector(".countdown-status");T&&(T.textContent=this.config.doneText||"Event started!"),this.updateDisplay({days:0,hours:0,minutes:0,seconds:0})};CW.prototype.destroy=function(){this.timer&&clearInterval(this.timer)};function init(s,o){var els=typeof s=="string"?d.querySelectorAll(s):[s];return Array.from(els).map(function(el){return new CW(el,o)})}d.addEventListener("DOMContentLoaded",function(){d.querySelectorAll('[data-widget="countdown"]').forEach(function(el){var o=el.dataset.options?JSON.parse(el.dataset.options):{};new CW(el,o)})});w.CountdownWidget={CountdownWidget:CW,init:init}})(window,document);
